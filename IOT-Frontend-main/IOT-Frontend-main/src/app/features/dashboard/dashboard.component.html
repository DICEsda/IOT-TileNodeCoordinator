<div class="dashboard-container">
  <!-- Header with Navigation -->
  <header class="dashboard-header">
    <div class="header-content">
      <div class="logo">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
          <path d="M16 4L4 10V22L16 28L28 22V10L16 4Z" stroke="#ffffff" stroke-width="2" fill="none"/>
          <circle cx="16" cy="16" r="4" fill="#ffffff"/>
        </svg>
        <h1>SmartLight</h1>
      </div>

      <nav class="header-navigation">
        <button
          class="tab-button"
          [class.active]="activeTab() === 'monitor'"
          (click)="setActiveTab('monitor')">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2l9 4.9V12c0 5.25-3.6 10.17-9 11.4-5.4-1.23-9-6.15-9-11.4V6.9L12 2z"/>
          </svg>
          Live Monitor
        </button>
        <button
          class="tab-button"
          [class.active]="activeTab() === 'devices'"
          (click)="setActiveTab('devices')">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="4" y="4" width="16" height="16" rx="2"/>
            <circle cx="12" cy="12" r="3"/>
          </svg>
          Devices & Sensors
        </button>
        <button
          class="tab-button"
          [class.active]="activeTab() === 'logs'"
          (click)="setActiveTab('logs')">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
            <line x1="16" y1="13" x2="8" y2="13"/>
            <line x1="16" y1="17" x2="8" y2="17"/>
            <line x1="10" y1="9" x2="8" y2="9"/>
          </svg>
          Logs
        </button>
        <button
          class="tab-button"
          [class.active]="activeTab() === 'calibrate'"
          (click)="setActiveTab('calibrate')">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"/>
            <path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"/>
          </svg>
          Calibrate
        </button>
        <button
          class="tab-button"
          [class.active]="activeTab() === 'settings'"
          (click)="setActiveTab('settings')">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"/>
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
          </svg>
          Settings
        </button>
      </nav>

      <div class="header-info">
        <span class="time">{{ getCurrentTime() }}</span>
        <div class="status-indicator">
          <span class="status-dot active"></span>
          <span>System Active</span>
        </div>
      </div>
    </div>
  </header>

  <!-- Tab Content -->
  <main class="tab-content">
    @if (activeTab() === 'monitor') {
      <div class="monitor-layout">
        <div class="visualizer-section">
          <app-room-visualizer (lightStateChanged)="onLightStateChanged($event)"></app-room-visualizer>
        </div>
        <div class="monitor-section">
          <app-light-monitor [totalActiveLights]="totalActiveLights()" [lightNodeStates]="lightNodeStates()"></app-light-monitor>
        </div>
      </div>
    }
    @if (activeTab() === 'devices') {
      <app-devices></app-devices>
    }
    @if (activeTab() === 'logs') {
      <app-logs></app-logs>
    }
    @if (activeTab() === 'calibrate') {
      <app-calibrate></app-calibrate>
    }
    @if (activeTab() === 'settings') {
      <app-settings></app-settings>
    }
  </main>
</div>

